"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[667],{3405:function(e,t,n){n.r(t),n.d(t,{default:function(){return V}});var s=n(8683),i=n(5671),o=n(3144),r=n(136),a=n(2882),l=n(2791),u="Profile_section__ai+0H",c="Profile_section__profile__LXolN",d="Post_avatar__tX11S",h=n(184),p=function(e){return(0,h.jsxs)("div",{children:[(0,h.jsx)("img",{src:"https://avatars.githubusercontent.com/u/85486375?v=4",alt:"avatar",className:d}),(0,h.jsx)("div",{children:e.postInfo.user}),(0,h.jsx)("div",{children:e.postInfo.text})]})},f=function(e){var t=e.posts.map((function(e){return(0,h.jsx)(p,{postInfo:e})}));return(0,h.jsx)("div",{children:t})},x=l.memo(f),j=n(885),m="ProfileInfo_avatar__YhCBy",v="ProfileInfo_profile__info__-WZ-B",g="ProfileInfo_infoText__QB-zQ",k="ProfileInfoForm_error__6WJ-m",I=n(7817),T=n(6139),b=n(704),P=n(3314),_=(0,I.BS)(40),N=(0,b.Z)({form:"editInfo"})((function(e){var t=e.handleSubmit;return(0,h.jsxs)("form",{onSubmit:t,children:[(0,h.jsx)("div",{children:(0,h.jsx)(T.Z,{name:"fullName",component:P.I,validate:[I.Ei,_],type:"text",placeholder:"Fullname..."})}),(0,h.jsx)("div",{children:(0,h.jsx)(T.Z,{name:"aboutMe",component:P.I,validate:[I.Ei,_],type:"text",placeholder:"About Me..."})}),(0,h.jsxs)("fieldset",{children:[(0,h.jsx)("legend",{children:"Contacts"}),(0,h.jsx)("div",{children:(0,h.jsx)(T.Z,{name:"contacts.vk",component:P.I,validate:[I.Ei,_],type:"text",placeholder:"Vk..."})}),(0,h.jsx)("div",{children:(0,h.jsx)(T.Z,{name:"contacts.github",component:P.I,validate:[I.Ei,_],type:"text",placeholder:"Github..."})}),(0,h.jsx)("div",{children:(0,h.jsx)(T.Z,{name:"contacts.instagram",component:P.I,validate:[I.Ei,_],type:"text",placeholder:"Instagram..."})}),(0,h.jsx)("div",{children:(0,h.jsx)(T.Z,{name:"contacts.twitter",component:P.I,validate:[I.Ei,_],type:"text",placeholder:"Twitter..."})})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)(T.Z,{name:"lookingForAJob",component:"input",type:"checkbox"}),"Looking for a job?"]}),(0,h.jsx)("div",{children:(0,h.jsx)(T.Z,{name:"lookingForAJobDescription",component:P.I,validate:[I.Ei,_],type:"text",placeholder:"Job description..."})}),(0,h.jsx)("div",{className:e.error?k:"",children:e.error}),(0,h.jsx)("div",{children:(0,h.jsx)("button",{children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435"})})]})})),Z=function(e){return(0,h.jsx)("div",{children:(0,h.jsx)(N,{initialValues:e.profile,onSubmit:function(t){e.changeProfileThunk(t).then((function(){e.setFormEditMode(!1)}))}})})},S=function(e){var t,n,s,i,o,r,a=(0,l.useState)(!1),u=(0,j.Z)(a,2),c=u[0],d=u[1],p=(0,l.useState)(!1),f=(0,j.Z)(p,2),x=f[0],k=f[1],I=(0,l.useState)(e.status),T=(0,j.Z)(I,2),b=T[0],P=T[1];(0,l.useEffect)((function(){P(e.status)}),[e.status]);return(0,h.jsxs)("div",{className:v,children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("img",{src:null!==(t=e.profile.photos)&&void 0!==t&&t.small?e.profile.photos.small:"https://avatars.githubusercontent.com/u/85486375?v=4",alt:"avatar",className:m}),e.authId===e.profile.userId?(0,h.jsx)("input",{type:"file",onChange:function(t){e.changePhotoThunk(t.target.files[0])}}):null]}),c?(0,h.jsx)("input",{type:"text",autoFocus:!0,onBlur:function(){d(!1),e.setStatusThunk(b)},defaultValue:b,onChange:function(e){P(e.currentTarget.value)}}):(0,h.jsxs)("div",{onDoubleClick:function(){d(!0)},children:[(0,h.jsx)("span",{className:g,children:"Status:"})," ",b]}),x?(0,h.jsx)(Z,{profile:e.profile,changeProfileThunk:e.changeProfileThunk,setFormEditMode:k}):(0,h.jsx)("div",{className:"profile-description",children:(0,h.jsxs)("ul",{children:[(0,h.jsxs)("li",{children:[(0,h.jsx)("span",{className:g,children:"Full name: "}),e.profile.fullName]}),(0,h.jsxs)("li",{children:[(0,h.jsx)("span",{className:g,children:"ID: "}),e.profile.userId]}),(0,h.jsxs)("li",{children:[(0,h.jsx)("span",{className:g,children:"About Me: "}),e.profile.aboutMe||"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e"]}),(0,h.jsxs)("li",{children:[(0,h.jsx)("span",{className:g,children:"VK: "}),(null===(n=e.profile.contacts)||void 0===n?void 0:n.vk)||"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e"]}),(0,h.jsxs)("li",{children:[(0,h.jsx)("span",{className:g,children:"Github: "}),(null===(s=e.profile.contacts)||void 0===s?void 0:s.github)||"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e"]}),(0,h.jsxs)("li",{children:[(0,h.jsx)("span",{className:g,children:"Instagram: "}),(null===(i=e.profile.contacts)||void 0===i?void 0:i.instagram)||"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e"]}),(0,h.jsxs)("li",{children:[(0,h.jsx)("span",{className:g,children:"Twitter: "}),(null===(o=e.profile.contacts)||void 0===o?void 0:o.twitter)||"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e"]}),(0,h.jsxs)("li",{children:[(0,h.jsx)("span",{className:g,children:"Twitter: "}),(null===(r=e.profile.contacts)||void 0===r?void 0:r.twitter)||"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e"]}),(0,h.jsxs)("li",{children:[(0,h.jsx)("span",{className:g,children:"Job description: "}),e.profile.lookingForAJobDescription||"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e"]})]})}),e.authId===e.profile.userId?(0,h.jsx)("button",{onClick:function(){k(!x)},children:"Edit"}):null]})},y=function(e){return(0,h.jsx)("div",{children:(0,h.jsx)(w,{onSubmit:function(t){console.log(t),e.addNewPostText(t.post)}})})},w=(0,b.Z)({form:"post"})((function(e){var t=e.handleSubmit;return(0,h.jsxs)("form",{onSubmit:t,children:[(0,h.jsx)(T.Z,{component:P.S,name:"post",validate:[I.C6,I.Ei],placeholder:"Post text..."}),(0,h.jsx)("button",{children:"Send"})]})})),E=function(e){return(0,h.jsx)("section",{className:u,children:(0,h.jsxs)("div",{className:c,children:[(0,h.jsx)(S,{profile:e.profile,status:e.status,setStatusThunk:e.setStatusThunk,authId:e.authId,changePhotoThunk:e.changePhotoThunk,changeProfileThunk:e.changeProfileThunk}),(0,h.jsx)(y,{addNewPostText:e.addNewPostText}),(0,h.jsx)(x,{posts:e.posts})]})})},F=n(6871),C=n(4802),A=n(1801),M=n(7827),B=n(7781),D=A.GT.addNewPostText,J=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){var e=this.props.router.params.userId||this.props.authId;this.props.getProfileThunk(e),this.props.getStatusThunk(e)}},{key:"componentDidUpdate",value:function(e){var t,n;if((null===(t=this.props.router.params)||void 0===t?void 0:t.userId)!==(null===(n=e.router.params)||void 0===n?void 0:n.userId)){var s=this.props.router.params.userId||this.props.authId;this.props.getProfileThunk(s),this.props.getStatusThunk(s)}}},{key:"render",value:function(){return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(E,(0,s.Z)({},this.props))})}}]),n}(l.Component),V=(0,B.qC)((0,C.$j)((function(e){return{posts:e.profilePage.posts,profile:e.profilePage.profile,status:e.profilePage.status,authId:e.auth.id}}),{addNewPostText:D,getProfileThunk:A.VB,getStatusThunk:A.$b,setStatusThunk:A.oI,changePhotoThunk:A.Ek,changeProfileThunk:A.bc}),(function(e){return function(t){var n=(0,F.TH)(),i=(0,F.s0)(),o=(0,F.UO)();return(0,h.jsx)(e,(0,s.Z)((0,s.Z)({},t),{},{router:{location:n,navigate:i,params:o}}))}}),M.P)(J)},7827:function(e,t,n){n.d(t,{P:function(){return c}});var s=n(8683),i=n(5987),o=(n(2791),n(6871)),r=n(4802),a=n(184),l=["isAuth"],u=function(e){return{isAuth:e.auth.isAuth}};function c(e){return(0,r.$j)(u,{})((function(t){var n=t.isAuth,r=(0,i.Z)(t,l);return n?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(e,(0,s.Z)({},r))}):(0,a.jsx)(o.Fg,{to:"/login"})}))}}}]);
//# sourceMappingURL=667.831ac248.chunk.js.map